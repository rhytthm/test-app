name: Build 

on:
  workflow_dispatch:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]  

jobs:
    build:
        name: Build and test
        runs-on: macos-latest
        steps:
            - name: Commit SHA
              run: echo $GITHUB_SHA
            - uses: actions/checkout@v4
            - name: List available Xcode versions
              run: ls /Applications | grep Xcode
            - name: Set up Xcode version
              run: sudo xcode-select -s /Applications/Xcode_15.2.app/Contents/Developer
            - name: Show current version of Xcode
              run: xcodebuild -version
            - name: Run tests
              run: ./run_tests.sh        